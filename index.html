<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine ğŸ’–</title>
<style>
  body {
    margin: 0;
    height: 100vh;
    background: linear-gradient(to bottom, #ffd6e8, #ffeef5);
    font-family: Arial, sans-serif;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .container {
    text-align: center;
    width: 90%;
    max-width: 400px;
    z-index: 2;
  }

  h1 { color: #e60073; font-size: 1.7rem; }
  h2 { color: #ff1a75; }

  .buttons {
    position: relative;
    height: 160px;
    margin-top: 25px;
  }

  button {
    position: absolute;
    padding: 14px 26px;
    font-size: 1.1rem;
    border-radius: 12px;
    border: none;
    cursor: pointer;
  }

  #yes { background: #ff4d88; color: white; left: 50%; transform: translateX(-50%); top: 20px; }
  #no { background: #ccc; left: 50%; transform: translateX(-50%); top: 90px; }

  #musicToggle {
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 10px 20px;
    background: rgba(255, 77, 136, 0.8);
    color: white;
    border: none;
    border-radius: 20px;
    font-size: 1rem;
    cursor: pointer;
    z-index: 1000;
    transition: background 0.3s;
  }

  #musicToggle:hover {
    background: rgba(255, 77, 136, 1);
  }

  #loveMessage { display: none; margin-top: 20px; }
  video { width: 100%; max-width: 320px; border-radius: 15px; margin-top: 15px; }

  /* Hearts animation */
  .heart {
    position: absolute;
    bottom: -20px;
    color: #ff4d88;
    animation: floatUp 6s linear forwards;
    opacity: 0.7;
    pointer-events: none;
    z-index: 1;
  }

  @keyframes floatUp {
    from { transform: translateY(0); opacity: 1; }
    to { transform: translateY(-110vh); opacity: 0; }
  }
</style>
</head>

<body>

<button id="musicToggle">ğŸ”‡ Music Off</button>

<div class="container">
  <h1>I love you Bhakti â¤ï¸<br>I love you so much baccha ğŸ’–</h1>
  <h2 id="question">Will you be my Valentine?</h2>

  <div class="buttons" id="buttons">
    <button id="yes">Yes ğŸ’–</button>
    <button id="no">Are you sure?? ğŸ˜</button>
  </div>

  <div id="loveMessage">
    <h2>I love you forever â¤ï¸</h2>
    <video id="loveVideo" controls muted playsinline autoplay preload="auto">
      <source src="love.mp4" type="video/mp4">
    </video>
  </div>
</div>

<audio id="bgMusic" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const noBtn = document.getElementById("no");
  const yesBtn = document.getElementById("yes");
  const buttons = document.getElementById("buttons");
  const question = document.getElementById("question");
  const loveMessage = document.getElementById("loveMessage");
  const bgMusic = document.getElementById("bgMusic");
  const video = document.getElementById("loveVideo");
  const musicToggle = document.getElementById("musicToggle");

  let isMusicPlaying = false;

  // Music toggle button
  musicToggle.addEventListener("click", () => {
    if (isMusicPlaying) {
      bgMusic.pause();
      musicToggle.textContent = "ğŸ”‡ Music Off";
      isMusicPlaying = false;
    } else {
      bgMusic.play().catch(() => console.log("Music playback failed"));
      musicToggle.textContent = "ğŸ”Š Music On";
      isMusicPlaying = true;
    }
  });

  const texts = [
    "Are you sure?? ğŸ˜",
    "Think again ğŸ˜œ",
    "Nope ğŸ˜‚",
    "Nice try ğŸ˜ˆ",
    "Still no? ğŸ˜˜",
    "Come on now ğŸ’•",
    "Really? ğŸ¥º",
    "Please? ğŸ’–",
    "You know you want to ğŸ˜‰",
    "Don't be shy ğŸ˜Š",
    "I'm waiting ğŸ’—",
    "One more chance? ğŸŒ¹",
    "Pretty please? ğŸ¥°",
    "You'll regret it ğŸ˜‹",
    "Just say yes! ğŸ’"
  ];

  // "No" button moves (avoids overlapping with "Yes")
  function moveNo() {
    const rect = buttons.getBoundingClientRect();
    const yesRect = yesBtn.getBoundingClientRect();
    const buttonsRect = buttons.getBoundingClientRect();

    let newLeft, newTop;
    let attempts = 0;
    const maxAttempts = 20;

    do {
      newLeft = Math.random() * (rect.width - noBtn.offsetWidth);
      newTop = Math.random() * (rect.height - noBtn.offsetHeight);

      // Check if new position overlaps with Yes button
      const noLeft = buttonsRect.left + newLeft;
      const noRight = noLeft + noBtn.offsetWidth;
      const noTop = buttonsRect.top + newTop;
      const noBottom = noTop + noBtn.offsetHeight;

      const overlap = !(noRight < yesRect.left ||
                       noLeft > yesRect.right ||
                       noBottom < yesRect.top ||
                       noTop > yesRect.bottom);

      if (!overlap) break;
      attempts++;
    } while (attempts < maxAttempts);

    noBtn.style.left = newLeft + "px";
    noBtn.style.top = newTop + "px";
    noBtn.textContent = texts[Math.floor(Math.random() * texts.length)];
  }
  noBtn.addEventListener("mouseover", moveNo);
  noBtn.addEventListener("touchstart", moveNo);

  // "Yes" button click
  yesBtn.addEventListener("click", () => {
    buttons.style.display = "none";
    question.style.display = "none";
    loveMessage.style.display = "block";

    // play music and video safely
    bgMusic.play().then(() => {
      isMusicPlaying = true;
      musicToggle.textContent = "ğŸ”Š Music On";
    }).catch(() => console.log("Music autoplay blocked"));

    video.play().catch((err) => {
      console.log("Video autoplay blocked:", err);
      // Video will still be visible with controls, user can click to play
    });
  });

  // Hearts
  function createHeart() {
    const heart = document.createElement("div");
    heart.className = "heart";
    heart.innerText = "â¤ï¸";
    heart.style.left = Math.random() * 100 + "vw";
    heart.style.fontSize = Math.random() * 20 + 12 + "px";
    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 6000);
  }
  setInterval(createHeart, 400);
});
</script>

</body>
</html>
